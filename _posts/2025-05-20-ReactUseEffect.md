---
title: "[React] useEffect 를 알아보자"
date: 2025-05-20 17:00:00 +0900
categories: [개발, React]
tags: [react hook, 리액트, 프론트엔드, 개발, 자바스크립트, useEffect, 훅]
---

**마운트부터 무한 루프, 클린업까지 완전 정복**

리액트를 쓰다 보면 `useEffect`는 꼭 만나게 됩니다. 하지만 많은 개발자들이 다음과 같은 고민을 하죠

> "왜 무한 루프가 생기지?"  
> "언제 실행되는 거야?"  
> "이거 꼭 써야 해?"

이번 글에서는 `useEffect`의 작동 방식과 실전 사용법을 예제로 하나하나 파헤쳐보겠습니다.

---

## useEffect는 무엇인가?

react 공식 문서([링크](https://ko.react.dev/reference/react/useEffect))에서는 `useEffect`는 외부 시스템과 컴포넌트를 동기화하는 React Hook 이라 설명하고 있습니다.

기본적으로 react 컴포넌트는 jsx 를 반환하여 UI 를 표현하고 사용자의 작업 click 과 같은 이벤트로 인해 발생하는 부수 효과를 이벤트 핸들러로 처리합니다.

`useEffect`는 리액트에서 컴포넌트가 렌더링된 **이후**에 위에서 설명한 UI 작업, 이벤트 핸들링 이외의 특정 작업(사이드 이펙트)을 수행합니다.

예를 들어:

- 데이터를 불러오거나
- 이벤트 리스너를 등록하거나
- 타이머를 설정하거나
- 외부 라이브러리를 초기화

이런 “UI 이외의 작업”은 `useEffect` 안에서 처리합니다.

---

## 기본 사용법과 실행 타이밍

```jsx
useEffect(() => {
  console.log("렌더링 될 때마다 실행");
});
```

기본적으로는 컴포넌트가 **렌더링될 때마다 실행**됩니다. 하지만 두 번째 인자인 **의존성 배열(dependency array)**을 통해 실행 조건을 제어할 수 있습니다.

### 의존성 배열 사용 예시:

```jsx
// 1. 매 렌더링마다 실행
useEffect(() => {
  console.log("항상 실행됨");
});

// 2. 처음 마운트될 때 한 번만 실행
useEffect(() => {
  console.log("처음 한 번만 실행됨");
}, []);

// 3. 특정 값이 바뀔 때만 실행
useEffect(() => {
  console.log("count가 바뀔 때만 실행");
}, [count]);
```

---

## 무한 루프가 생기는 경우

```jsx
useEffect(() => {
  setValue(value + 1);
}, [value]);
```

- `value`가 바뀌면 effect 실행  
- effect 안에서 `setValue()` 실행  
- `value` 다시 바뀜 → 또 실행…

---

## 클린업 함수: 컴포넌트가 사라질 때

어떤 작업은 컴포넌트가 **사라질 때(언마운트)** 정리해줘야 합니다.  
예: 이벤트 리스너 제거, 타이머 제거

```jsx
useEffect(() => {
  const timer = setInterval(() => {
    console.log("1초마다 실행");
  }, 1000);

  return () => {
    clearInterval(timer); // 컴포넌트 제거 시 타이머 정리
  };
}, []);
```

이렇게 `return`을 통해 **클린업(clean-up)** 함수를 반환하면, 컴포넌트가 사라질 때 자동으로 실행됩니다.

---

## useEffect가 꼭 필요한가?

모든 로직을 `useEffect`로 처리할 필요는 없습니다. 아래는 언제 필요하고, 언제 피해야 하는지입니다.

| 상황            | 예시                        | useEffect 필요 여부           |
| --------------- | --------------------------- | ----------------------------- |
| ✅ 외부 요청     | fetch로 API 호출            | 필요함                        |
| ✅ 이벤트 리스너 | resize, scroll              | 필요함                        |
| ❌ 단순 계산     | `const doubled = count * 2` | 불필요 (`useMemo`가 더 적절)  |
| ❌ 클릭 이벤트   | 버튼 클릭 → 상태 변경       | 불필요 (이벤트 핸들러로 충분) |

---


## 정리

| 핵심 개념     | 요약                                  |
| ------------- | ------------------------------------- |
| 언제 실행?    | 렌더링 이후 실행됨                    |
| 실행 조건?    | 의존성 배열로 제어                    |
| 무한 루프?    | 상태 변경 + 의존성 → 주의 필요        |
| 클린업?       | 컴포넌트 사라질 때 실행되는 정리 함수 |
| 꼭 써야 하나? | 화면 외 작업일 때만 쓰기              |

---

## 마무리

`useEffect`는 리액트의 핵심 훅 중 하나입니다.

공식 문서에서는 Effect 의 무분별한 사용은 지양하고 있습니다. 

상황에 맞게 사용하고 불필요한 Effect 가 있다면 다른 방법을 찾아보는 것도 좋을 것 같습니다.

처음엔 어렵지만, 의존성과 실행 타이밍만 확실히 이해하면 도움이 되리라 생각됩니다.